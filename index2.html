<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css"/>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
<div id="terminal" style="width: 100%; height: 90vh;"></div>
<script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js"></script>
<script>
    let token = "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZW1vMiIsInVzZXJBdXRoSWQiOiI4ZWViYWFmMi03NDJmLTRmMzYtYjc0YS04NmI0ZjhlYmMyYjgiLCJyb2xlc0luZm8iOnsiaG9zdC1jbHVzdGVyIjp7InVzZXJUeXBlIjoiQ0xVU1RFUl9BRE1JTiIsIm5hbWVzcGFjZUxpc3QiOm51bGx9fSwiSVAiOm51bGwsInVzZXJUeXBlIjoiQ0xVU1RFUl9BRE1JTiIsImV4cCI6MTc1MTk3MTcyMSwiaWF0IjoxNzUxOTYwOTIxLCJCcm93c2VyIjpudWxsfQ.OWtJwaECqsqWrzyBXm1sdToelGDXYSVdXKKJKsAC-rxePY4SXB3f1OyWd5BtNoOSV-HEkLroazcYqCs40QI7-w";
    let socket =null;
    let term = new Terminal();
    term.open(document.getElementById('terminal'));
    let inputHandlerBound = false;

    function init() {
        socket = new WebSocket('ws://localhost:8080/ws/exec?namespace=cp-portal&pod=nats-box-5bb5b8657c-wvzbb&container=nats-box&clusterId=host-cluster', ["bearer", token]);
        if (!inputHandlerBound) {
            term.onData(data =>{
                socket.send(data);
            })
            inputHandlerBound = true;
        }
        socket.onmessage = event => {
            term.write(event.data);
        };
        socket.onopen = () => term.write('connected....\n\r')
        socket.onclose = () => term.write('disconnected....\n')
    }
    init();
</script>
<form>
    <select name="namespace" id="namespace">

    </select>
    <select name="pod" id="pod">

    </select>
    <select name="container" id="container">

    </select>
    <br><br>
</form>
</body>
</html>